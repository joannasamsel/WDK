import gmpy2
from gmpy2 import mpz,f_mod,powmod
p=mpz(13407807929942597099574024998205846127479365820592393377723561443721764030073546976801874298166903427690031858186486050853753882811946569946433649006084171)
g=mpz(26790476600736210439911326117339978371955050182095051707060863109260114006743503487596200818701323671541681934177621901008556022090467034705794892743945893)
h=mpz(4476678147226155115558365457750475595861521772603596936757528326067178243549776543712192144627870184928567432208656624794079113374237487568153440925199271)


n=2**20
tablica={}
for i in range(n):
    t1=f_mod(powmod(powmod(g,i,p),(-1),p)*h,p)
    tablica[t1]=i

for i in range(n):
    t2=powmod(powmod(g,n,p),i,p)
    if t2 in tablica:
        x=tablica.get(t2)
        break

x=i*n+x
print ("x= %s" %x)
